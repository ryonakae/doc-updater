---
name: update-from-session
description: セッション中の失敗・修正・試行錯誤を分析し、再発防止策をエージェント指示ファイルに反映する。セッションの学びの保存、繰り返しミスの防止、またはドキュメントへの教訓の反映について言及している場合に使用する。
---

# セッションの学びをドキュメントに反映

このセッションの会話を振り返り、以下を `.claude/reflections.md` に書き出す:

1. **失敗パターン**: エージェントが間違えた箇所、人間に修正された箇所を列挙
2. **根本原因**: なぜ間違えたか（知識不足、前提の誤解、指示の見落とし等）
3. **防止策**: エージェント指示ファイルに追記すべきルールや事実（各1行、事実形式で記述。「〜してください」ではなく「〜を使う」の形）

失敗や修正が見当たらない場合は「反映すべき学びはありません」と報告して終了する。

書き出したら、doc-updater サブエージェントに以下を依頼する:
「`.claude/reflections.md` の防止策をエージェント指示ファイルに反映してください。反映後 `.claude/reflections.md` は削除してください。」
